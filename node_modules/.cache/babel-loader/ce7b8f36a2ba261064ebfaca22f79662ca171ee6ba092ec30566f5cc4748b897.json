{"ast":null,"code":"import\"./App.css\";import TablewView from\"./layouts/components/tableView/TablewView\";import{useEffect,useState}from\"react\";import FormNewItem from\"./layouts/components/formNewItem/FormNewItem\";import ModalDeleteContact from\"./layouts/components/ModalDeleteContact\";import{getContacts,addContact,deleteContact}from\"./layouts/mocks/mockApi\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MockApp(){const[items,setItems]=useState([]);const[loading,setLoading]=useState(false);const[isModalOpen,setIsModalOpen]=useState(false);const[currentContactId,setCurrentContactId]=useState(null);useEffect(()=>{console.log(\"Fetching contacts...\");getContacts().then(data=>{setItems(data);console.log(\"Contacts loaded:\",data);}).catch(error=>console.error(\"Error fetching contacts:\",error));},[]);const appendContact=(fullName,phone,notes)=>{const contact={fullName,phone,notes};setLoading(true);addContact(contact).catch(error=>console.error(\"Error adding contact:\",error)).finally(()=>setLoading(false));};const onToggleModal=function(){let id=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;setIsModalOpen(prev=>!prev);setCurrentContactId(id);};const removeContact=()=>{if(!currentContactId){console.error(\"No contact ID to delete\");return;}deleteContact(currentContactId).then(()=>{setItems(items.filter(item=>item.id!==currentContactId));console.log(\"Contact deleted with ID:\",currentContactId);}).catch(error=>console.error(\"Error deleting contact:\",error)).finally(()=>onToggleModal());};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"App\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(TablewView,{data:items,removeContact:onToggleModal// Передаём функцию открытия модального окна\n}),/*#__PURE__*/_jsx(FormNewItem,{appContact:appendContact,disabled:loading})]})]}),/*#__PURE__*/_jsx(ModalDeleteContact,{isOpen:isModalOpen,onModal:removeContact// Удаляем контакт\n,onCancel:()=>onToggleModal(false)// Закрыть модальное окно\n})]});}export default MockApp;","map":{"version":3,"names":["TablewView","useEffect","useState","FormNewItem","ModalDeleteContact","getContacts","addContact","deleteContact","jsx","_jsx","jsxs","_jsxs","MockApp","items","setItems","loading","setLoading","isModalOpen","setIsModalOpen","currentContactId","setCurrentContactId","console","log","then","data","catch","error","appendContact","fullName","phone","notes","contact","finally","onToggleModal","id","arguments","length","undefined","prev","removeContact","filter","item","className","children","appContact","disabled","isOpen","onModal","onCancel"],"sources":["D:/learn/GitHub/appstepikjavareact/client/src/MockApp.js"],"sourcesContent":["import \"./App.css\";\r\nimport TablewView from \"./layouts/components/tableView/TablewView\";\r\nimport { useEffect, useState } from \"react\";\r\nimport FormNewItem from \"./layouts/components/formNewItem/FormNewItem\";\r\nimport ModalDeleteContact from \"./layouts/components/ModalDeleteContact\";\r\nimport {\r\n    getContacts,\r\n    addContact,\r\n    deleteContact,\r\n} from \"./layouts/mocks/mockApi\";\r\n\r\nfunction MockApp() {\r\n    const [items, setItems] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [currentContactId, setCurrentContactId] = useState(null);\r\n\r\n    useEffect(() => {\r\n        console.log(\"Fetching contacts...\");\r\n        getContacts()\r\n            .then((data) => {\r\n                setItems(data);\r\n                console.log(\"Contacts loaded:\", data);\r\n            })\r\n            .catch((error) => console.error(\"Error fetching contacts:\", error));\r\n    }, []);\r\n\r\n    const appendContact = (fullName, phone, notes) => {\r\n        const contact = { fullName, phone, notes };\r\n        setLoading(true);\r\n        addContact(contact)\r\n            .catch((error) => console.error(\"Error adding contact:\", error))\r\n            .finally(() => setLoading(false));\r\n    };\r\n\r\n    const onToggleModal = (id = null) => {\r\n        setIsModalOpen((prev) => !prev);\r\n        setCurrentContactId(id);\r\n    };\r\n\r\n    const removeContact = () => {\r\n        if (!currentContactId) {\r\n            console.error(\"No contact ID to delete\");\r\n            return;\r\n        }\r\n        deleteContact(currentContactId)\r\n            .then(() => {\r\n                setItems(items.filter((item) => item.id !== currentContactId));\r\n                console.log(\"Contact deleted with ID:\", currentContactId);\r\n            })\r\n            .catch((error) => console.error(\"Error deleting contact:\", error))\r\n            .finally(() => onToggleModal());\r\n    };\r\n    return (\r\n        <div className=\"container mt-5\">\r\n            <div className=\"card\">\r\n                <div className=\"card-header\">\r\n                    <h1>App</h1>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    <TablewView\r\n                        data={items}\r\n                        removeContact={onToggleModal} // Передаём функцию открытия модального окна\r\n                    />\r\n                    <FormNewItem\r\n                        appContact={appendContact}\r\n                        disabled={loading}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <ModalDeleteContact\r\n                isOpen={isModalOpen}\r\n                onModal={removeContact} // Удаляем контакт\r\n                onCancel={() => onToggleModal(false)} // Закрыть модальное окно\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MockApp;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}